
                                    <div role="main" id="mc-main-content">
                                        <div class="IntroductionTopics">
                                            <div>
                                                <h1 class="introduction">Authentication and Authorization</h1>
                                                <p>Most of the resources of the Public API are protected and require that the user is authenticated. The Player's Health Public API uses bearer authentication which is an HTTP authentication scheme where a cryptographic token is generated by the Player's Health system and returned in response to a login request.</p>
                                                <p>You authenticate each request by presenting your API&#160;key in the request header as follows:</p>
                                                <div class="sample">Authorization: Bearer {&lt;Generated_Token}</div>
                                                <p>For example, the beginning of a request using a fictitious key:</p>
                                                <div class="sample">curl &lt;.....Place Holder to show example.....&gt;</div>
                                                <p>You also need to set the base URL in he request.</p>
                                                <p>Each generated token is valid for 4 minutes. Once expired, another request has to be made to generate a new token. </p>
                                                <p>Token represents an authenticated user. It must be saved securely. </p>
                                                <p>Bearer authentication should be used over HTTPS only. Players Health public API does not support HTTP requests.</p>
                                                <p>If a resource is protected and the <code class="highlight">Authorization</code> header is not present, the request returns 401 Unauthorized with response body as follows:</p>
                                                <div class="sample"><pre xml:space="preserve">{
  "Message": "Unauthorized."
}</pre>
                                                </div>
                                                <h3>Key Generation</h3>
                                                <p>This authentication process requires a key pair to be generated. Private key will remain secured on the client side and will be used to sign JWTs. Public certificate is kept save in Players Health system to verify of the JWTs signature.

</p>
                                                <p>Players Health team will enable the integration via Public API. After that, Organization admin will be able to request a private API key (PEM file) using the admin panel interface under the sports organization settings page.
</p>
                                                <h3>
JWT</h3>
                                                <ol>
                                                    <li value="1">
                                                        <p>API client creates login JWT token and signs it using RSA SHA512 and the certificate private key.
</p>
                                                        <p>/* JSON representation of JWT header/
</p>
                                                        <div class="sample"><pre xml:space="preserve">{
  "kid": "{apiClientKeyId}",
  "typ": "JWT",
  "alg": "RS512"
}</pre>
                                                        </div>
                                                        <p>where:
</p>
                                                        <ul>
                                                            <li>
                                                                <p><b>kid</b> - Key ID.
</p>
                                                            </li>
                                                        </ul>
                                                        <p>/* JSON representation of JWT body/
</p>
                                                        <div class="sample"><pre xml:space="preserve">{
  "aud": "api.athletesafety.playershealth.com",
  "iat": 1328550785,
  "exp": 1328554385,
  "jti": "46EEC46A-1CBA-44A1-8EC3-82494AA19327"
}</pre>
                                                        </div>
                                                        <p>where:
</p>
                                                        <ul>
                                                            <li>
                                                                <p><b>aud</b> - A description of the intended audience. This should be the URL of "api.athletesafety.playershealth.com" for production environment, and "api-staging-athletesafety.playershealth.com" for staging environment.
</p>
                                                            </li>
                                                            <li>
                                                                <p><b>iat</b> - Issued at time in seconds since the epoch UTC.
</p>
                                                            </li>
                                                            <li>
                                                                <p><b>exp</b> - Expiry time in seconds since the epoch UTC. Difference between exp and iat should not be more than 120 seconds.
</p>
                                                            </li>
                                                            <li>
                                                                <p><b>jti</b> - A GUID in string format that is a unique identifier of this token request.
</p>
                                                            </li>
                                                        </ul>
                                                    </li>
                                                    <li value="2">
                                                        <p>Client sends JWT token to Player's Health Public API authentication endpoint to request an authorization token.
</p>
                                                    </li>
                                                    <li value="3">
                                                        <p>Player's Health Public API verifies JWT that can acquire authorization token.
</p>
                                                    </li>
                                                    <li value="4">
                                                        <p>Player's Health Public API returns authorization JWT token.
</p>
                                                    </li>
                                                    <li value="5">
                                                        <p>Client server requests REST API resource using the authorization JWT as bearer token.
</p>
                                                    </li>
                                                    <li value="6">
                                                        <p>Player's Health Public API returns response.</p>
                                                    </li>
                                                </ol>
                                            </div>
                                            <div>
                                                <p>&#160;</p>
                                            </div>
                                        </div>
                                    </div>
                                
